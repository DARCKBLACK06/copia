<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Registro de Inquilino</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Firebase SDKs -->
  <!-- Styles -->
  <link rel="stylesheet" href="./css/style-login.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <link rel="icon" type="image/x-icon" href="./favicon.ico" />
  <!-- Script -->
  <script src="./js/main.js" type="module"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
</head>
<body class="bg-neutral-100 font-sans">

  <div class="max-w-4xl mx-auto mt-10 bg-white p-8 rounded-2xl shadow-xl">
    <h2 class="text-3xl font-semibold text-gray-800 mb-6 text-center">Registro de Nuevo Inquilino</h2>

    <form id="formInquilino" class="space-y-6">

      <!-- Datos personales -->
      <div>
        <h3 class="text-xl font-semibold text-gray-700 mb-4 border-b pb-2">Datos personales del inquilino</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <input type="text" placeholder="Nombre completo" class="input" name="nombre" required>
          <input type="text" placeholder="CURP" class="input" name="curp" required>
          <input type="date" class="input" name="fechaNacimiento" required>
          <input type="tel" placeholder="Teléfono" class="input" name="telefono" required>
          <input type="email" placeholder="Correo electrónico" class="input" name="correo" required>
          <input type="text" placeholder="Identificación oficial" class="input" name="identificacion" required>
        </div>
      </div>

      <!-- Datos de domicilio -->
      <div>
        <h3 class="text-xl font-semibold text-gray-700 mb-4 border-b pb-2">Datos de domicilio</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <input type="text" placeholder="Departamento asignado" class="input" name="departamento" required>
          <input type="date" class="input" name="inicioContrato" required>
          <input type="date" class="input" name="finContrato" required>
          <input type="text" placeholder="Tipo de contrato" class="input" name="tipoContrato" required>
          <input type="number" placeholder="Número de personas" class="input" name="personas">
          <input type="text" placeholder="Lugar de procedencia (opcional)" class="input" name="procedencia">
        </div>
      </div>

      <!-- Datos de emergencia -->
      <div>
        <h3 class="text-xl font-semibold text-gray-700 mb-4 border-b pb-2">Datos de emergencia</h3>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <input type="text" placeholder="Nombre del contacto" class="input" name="emergenciaNombre" required>
          <input type="text" placeholder="Parentesco" class="input" name="emergenciaParentesco" required>
          <input type="tel" placeholder="Teléfono de emergencia" class="input" name="emergenciaTelefono" required>
        </div>
      </div>

      <!-- Botón de enviar -->
      <div class="text-center mt-8">
        <button type="submit" class="bg-rose-500 hover:bg-rose-600 text-white font-semibold py-3 px-6 rounded-xl shadow-md transition">
          Registrar inquilino
        </button>
      </div>
    </form>

    <p id="mensaje" class="mt-4 text-center text-green-600 font-semibold hidden">Inquilino registrado con éxito </p>
  </div>

  <style>
    .input {
      @apply border border-gray-300 rounded-xl px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-rose-400 focus:border-transparent;
    }
  </style>

  <script>
    //  CONFIGURA TU FIREBASE AQUÍ
const firebaseConfig = {
  apiKey: "AIzaSyDt_zRk8puKQK843Ro9B_5SegOibMXFblY",
  authDomain: "mi-proyecto-iot-b161b.firebaseapp.com",
  databaseURL: "https://mi-proyecto-iot-b161b-default-rtdb.firebaseio.com",
  projectId: "mi-proyecto-iot-b161b",
  storageBucket: "mi-proyecto-iot-b161b.firebasestorage.app",
  messagingSenderId: "302108382685",
  appId: "1:302108382685:web:3666bc3b9250059704d234"
};

    // Inicializar Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Manejar el formulario
    document.getElementById('formInquilino').addEventListener('submit', async (e) => {
      e.preventDefault();

      const data = Object.fromEntries(new FormData(e.target));

      try {
        await db.collection("inquilinos").add(data);
        e.target.reset();
        document.getElementById("mensaje").classList.remove("hidden");
      } catch (error) {
        alert("Error al registrar: " + error.message);
      }
    });
  </script>
</body>
</html>